<form class="{{cssClass}} flexcol" autocomplete="off">

  {{!-- Sheet Header --}}
  <header class="sheet-header">
    <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100" />
    <div class="header-fields">
      <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name" /></h1>
      <div class="resource flex-group-center">
        <label for="data.experience.value" class="resource-label">Experience</label>
        <label for="data.experience.value" class="resource-label">{{data.experience.value}} xp</label>
      </div>
      {{!-- The grid classes are defined in scss/global/_grid.scss. To use,
            use both the "grid" and "grid-Ncol" class where "N" can be any number
            from 1 to 12 and will create that number of columns.  --}}
      <div class="resources grid grid-2col">
        {{!-- "flex-group-center" is also defined in the _grid.scss file
              and it will add a small amount of padding, a border, and will
              center all of its child elements content and text. --}}
        <div class="resource flex-group-center">
          <label for="data.hitPoints.value" class="resource-label">Health</label>
          <div class="resource-content flexrow flex-center flex-between">
            <input type="text" name="data.hitPoints.value" value="{{data.hitPoints.value}}" data-dtype="Number" />
            <span> / </span>
            <label for="data.hitPoints.max" class="resource-label" data-dtype="Number">{{data.hitPoints.max}}</label>
          </div>
        </div>
        <div class="resource flex-group-center">
          <label for="data.mindPoints.value" class="resource-label">Mind Points</label>
          <div class="resource-content flexrow flex-center flex-between">
            <input type="text" name="data.mindPoints.value" value="{{data.mindPoints.value}}" data-dtype="Number" />
            <span> / </span>
            <label for="data.mindPoints.max" class="resource-label" data-dtype="Number">{{data.mindPoints.max}}</label>
          </div>
        </div>
      </div>
    </div>
  </header>

  {{!-- Sheet Tab Navigation --}}
  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="stats">Stats</a>
    <a class="item" data-tab="talents">Talents</a>
    <a class="item" data-tab="gear">Gear</a>
    <a class="item" data-tab="weapons">Weapons</a>
    <a class="item" data-tab="description">Description</a>
  </nav>

  {{!-- Sheet Body --}}
  <section class="sheet-body">
    {{!-- Biography Tab --}}
    <div class="tab biography" data-group="primary" data-tab="description">
      {{editor content=data.biography target="data.biography" button=true owner=owner editable=editable}}
    </div>

    {{!-- Talents Tab --}}
    <div class="tab talents" data-group="primary" data-tab="talents">
      <ol class="inventory-list">
        {{#each actor.talents as |talentData categoryKey|}}
        {{!-- setup header for a talent category--}}
        <li class="inventory-header flexrow">
          <h3 class="talent-name flexrow">{{getTalentCategoryName categoryKey}}</h3>

          {{#if ../owner}}
          <div class="item-controls">
            <a class="item-control item-create" title='{{localize "YZECORIOLIS.CreateTalent"}}'
              {{#each talentData.dataset as |v k|}}data-{{k}}="{{v}}" {{/each}}>
              <i class="fas fa-plus"></i> {{localize "YZECORIOLIS.Add"}}
            </a>
          </div>
          {{/if}}

        </li>
        {{!-- show talent for each category --}}
        {{#each talentData.items as |talent id|}}
        <li class="item flexrow" data-item-id="{{talent._id}}">
          <div class="item-name flexrow rollable">
            <div class="item-image" style="background-image: url({{talent.img}})"></div>
            <h4>{{talent.name}}</h4>
          </div>
          <div class="item-controls">
            <a class="item-control item-edit" title="Edit Talent"><i class="fas fa-edit"></i></a>
            <a class="item-control item-delete" title="Delete Talent"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
        {{/each}}
      </ol>
    </div>

    {{!-- Stats Tab --}}
    <div class="tab flexrow" data-group="primary" data-tab="stats">

      {{!-- Attributes List --}}
      <ul class="attributes-list flexrow">
        {{#each actor.data.attributes as |ability key|}}
        <li class="attribute-item">
          <label for="data.attributes.{{key}}.value" class="resource-label rollable" data-rolltype="attribute"
            data-attributekey={{key}} data-roll="(@attributes.{{key}}.value)d6"
            data-label="{{getAttributeName key}}">{{getAttributeName key}}</label>
          <input type="text" name="data.attributes.{{key}}.value" value="{{ability.value}}" data-dtype="Number" />
        </li>
        {{/each}}
      </ul>


      <ol class="stat-list">
        {{!-- Create a header for each skill type --}}
        <li class="skill-header flexrow">
          <h3 class="skill-name flexrow">{{getSkillCategoryName 'general'}}</h3>
        </li>
        {{#each actor.data.skills as |skill id|}}
        {{#if_eq skill.category 'general'}}
        <li class="skill flexrow" data-item-id="{{skill._id}}">
          <div class="skill-name flexrow rollable" data-rolltype="skill" data-attributekey={{skill.attribute}}
            data-skillkey={{id}} data-roll="(@attributes.{{skill.attribute}}.value + @skills.{{id}}.value)d6"
            data-label="{{getSkillName id}}">
            <div class="skill-image" style="background-image: url({{skill.img}})"></div>
            <h4>{{getSkillName id}} ({{getAttributeName skill.attribute}})</h4>
          </div>
          <input class="skill-input" type="text" name="data.skills.{{id}}.value" value="{{skill.value}}"
            data-dtype="Number" />
        </li>
        {{/if_eq }}
        {{/each}}
      </ol>

      <ol class="stat-list">
        {{!-- Create a header for each skill type --}}
        <li class="skill-header flexrow">
          <h3 class="skill-name flexrow">{{getSkillCategoryName 'advanced'}}</h3>
        </li>
        {{#each actor.data.skills as |skill id|}}
        {{#if_eq skill.category 'advanced'}}
        <li class="skill flexrow" data-item-id="{{skill._id}}">
          <div class="skill-name flexrow rollable"
            data-roll="(@attributes.{{skill.attribute}}.value + @skills.{{id}}.value)d6"
            data-label="{{getSkillName id}}">
            <div class="skill-image" style="background-image: url({{skill.img}})"></div>
            <h4>{{getSkillName id}} ({{getAttributeName skill.attribute}})</h4>
          </div>
          <input class="skill-input" type="text" name="data.skills.{{id}}.value" value="{{skill.value}}"
            data-dtype="Number" />
        </li>
        {{/if_eq }}
        {{/each}}
      </ol>

      <ol class="critical-injury-list">
        <li class="injury-header flexrow">
          <h3 class="injury-header-name flexrow">{{localize "YZECORIOLIS.CriticalInjuries"}}</h3>

          {{#if owner}}
          <div class="injury-controls">
            <a class="injury-control injury-create" title='{{localize "YZECORIOLIS.CreateCriticalInjury"}}'
              {{#each gearData.dataset as |v k|}}data-{{k}}="{{v}}" {{/each}}>
              <i class="fas fa-plus"></i> {{localize "YZECORIOLIS.Add"}}
            </a>
          </div>
          {{/if}}

        </li>
        {{#each actor.data.criticalInjuries as |injury ciKey|}}
        <li class="injury flexrow" data-item-id="{{ciKey}}">
          <div class="injury-name">
            <input type="text" name="data.criticalInjuries.{{ciKey}}" value="{{injury}}"
              placeholder="{{localize "YZECORIOLIS.CriticalInjury"}}" />
          </div>
          <div class="injury-controls">
            <a class="injury-control injury-delete" title={{localize "YZECORIOLIS.DeleteCriticalInjury"}}><i
                class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
      </ol>

    </div>

    {{!-- Gear Tab --}}
    <div class="tab flexcol" data-group="primary" data-tab="gear">
      {{#with actor.encumbrance}}
      <div class="encumbrance {{#if encumbered}}encumbered{{/if}}">
        <span class="encumbrance-bar  {{#if encumbered}}encumbered{{/if}}" style="width:{{percentage}}%"></span>
        <span class="encumbrance-label">{{value}} / {{max}}</span>
        <i class="encumbrance-breakpoint encumbrance-33 arrow-up"></i>
        <i class="encumbrance-breakpoint encumbrance-33 arrow-down"></i>
        <i class="encumbrance-breakpoint encumbrance-66 arrow-up"></i>
        <i class="encumbrance-breakpoint encumbrance-66 arrow-down"></i>
      </div>
      {{/with}}
      <div class="inventory-section-header">
        <li>{{localize "YZECORIOLIS.Gear"}}</li>
      </div>

      <ol class="inventory-list">
        {{#each actor.gear as |gearData weightKey|}}
        {{!-- setup header for a gear weight class--}}
        <li class="inventory-header flexrow">
          <h3 class="gear-name flexrow">{{getGearWeightName weightKey}}</h3>
          <div class="gear-name">{{localize "YZECORIOLIS.TechTier"}}</div>
          <div class="gear-name">{{localize "YZECORIOLIS.Quantity"}}</div>
          <div class="gear-name">{{localize "YZECORIOLIS.Restricted"}}</div>
          {{#if ../owner}}
          <div class="item-controls">
            <a class="item-control item-create" title='{{localize "YZECORIOLIS.CreateGear"}}'
              {{#each gearData.dataset as |v k|}}data-{{k}}="{{v}}" {{/each}}>
              <i class="fas fa-plus"></i> {{localize "YZECORIOLIS.Add"}}
            </a>
          </div>
          {{/if}}

        </li>
        {{!-- show gear for each weight --}}
        {{#each gearData.items as |gear id|}}
        <li class="item flexrow" data-item-id="{{gear._id}}">
          <div class="item-name flexrow">
            <div class="item-image" style="background-image: url({{gear.img}})"></div>
            <h4>{{gear.name}}</h4>
          </div>

          <div class="gear-name">
            {{getTechTierName gear.data.techTier}}
          </div>

          <div class="gear-quantity flex-center">
            <input class="gear-quantity-input" type="number" step="1" min="0" name="gear.data.quantity"
              value="{{gear.data.quantity}}" data-dtype="Number" />
          </div>
          <div class="gear-name">
            {{#if_eq gear.data.restricted true}}
            <i class="fas fa-key"></i>
            {{/if_eq}}
          </div>
          <div class="item-controls">
            <a class="item-control item-edit" title="Edit Gear"><i class="fas fa-edit"></i></a>
            <a class="item-control item-delete" title="Delete Gear"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
        {{/each}}
      </ol>
      <div class="inventory-section-header">
        <li>{{localize "YZECORIOLIS.Weapons"}}</li>
      </div>
      <div class="inventory-section-header">
        <li>{{localize "YZECORIOLIS.Armor"}}</li>
      </div>


    </div>
  </section>
</form>